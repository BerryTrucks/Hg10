
    </div>


    <br/>&nbsp;<br/>&nbsp;<br/>&nbsp;<br/>&nbsp;<br/>&nbsp;<br/>

    <div id="end" ></div>

        <script type="text/javascript">

        // ----------------------
        // adjust context menu height

        var container 	= document.getElementById("container");
        //var contextMenu = document.getElementById("context");
        //var topic 		= document.getElementById("topic"); 

        container.style.width = window.innerWidth-64;

        function sendURL(url) { navigator.cascades.postMessage(url); }

        function pushMessage(who, what, avatar) {
            var message = container.innerHTML;
            var newcontent = document.createElement('div');

            if(who == 0) {
                newcontent.innerHTML = "<div class=\"bubble-left\"><div class=\"bubble-left-avatar\"><img src=" + avatar + " /></div><p>" + what + "</p></div>";
            } else {
                newcontent.innerHTML = "<div class=\"bubble-right\"><div class=\"bubble-right-avatar\"><img src=" + avatar + " /></div><p>" + what + "</p></div>";
            }

            while (newcontent.firstChild) {
                container.appendChild(newcontent.firstChild);
            }

            scrollToEnd();
        }

        function scrollToEnd() {
            //document.getElementById(messageID).scrollIntoView();
            if(window.innerWidth > 1000)
                sendURL("SCROLLTO:"+GetScreenCordinates(document.getElementById("end")).y*1.395);
            else
                sendURL("SCROLLTO:"+GetScreenCordinates(document.getElementById("end")).y);

        }

        function GetScreenCordinates(obj) {
            var p = {};
            p.x = obj.offsetLeft;
            p.y = obj.offsetTop;
            while (obj.offsetParent) {
                p.x = p.x + obj.offsetParent.offsetLeft;
                p.y = p.y + obj.offsetParent.offsetTop;
                if (obj == document.getElementsByTagName("body")[0]) {
                    break;
                }
                else {
                    obj = obj.offsetParent;
                }
            }
            return p;
        }



        </script>

    </body>
</html>